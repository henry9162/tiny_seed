name: Continuous integration and deployment

on: 
  push:
    branches:
      - master

jobs:
  first-job:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup dotnet 7
        uses: xt0rted/setup-dotnet@v1.0.0
        with:
            dotnet-version: '7.0.x'

      - name: Restore dependencies
        run: dotnet restore smw/SMW.csproj

      - name: Build application
        run: dotnet build smw/SMW.csproj -c Release --no-restore
        
      - name: Run unit tests
        run: dotnet test smwtests/SMWTests.csproj -c Release --no-restore